<%- model_class = Order -%>
<%= render 'layouts/header' %>
<% bootstrap_flash %>
<div class='container'>
    <div class="page-header">
  <h1><%=t '.title', :default => model_class.model_name.human.titleize %></h1>
</div>
<dl class="dl-horizontal">
  <dt><strong><%= model_class.human_attribute_name(:title) %>:</strong></dt>
  <dd><%= @order.title.presence || '-'%></dd>
  <dt><strong><%= model_class.human_attribute_name(:author) %>:</strong></dt>
  <dd><%= @order.author.presence || '-'%></dd>
  <dt><strong><%= model_class.human_attribute_name(:format) %>:</strong></dt>
  <dd><%= @order.format.presence || '-'%></dd>
  <dt><strong><%= model_class.human_attribute_name(:publication_date) %>:</strong></dt>
  <dd><%= @order.publication_date.presence || '-'%></dd>
  <dt><strong><%= model_class.human_attribute_name(:isbn) %>:</strong></dt>
  <dd><%= @order.isbn  || '-'%></dd>
  <dt><strong><%= model_class.human_attribute_name(:publisher) %>:</strong></dt>
  <dd><%= @order.publisher.presence || '-'%></dd>
  <dt><strong><%= model_class.human_attribute_name(:oclc) %>:</strong></dt>
  <dd><%= @order.oclc || '-' %></dd>
  <dt><strong><%= model_class.human_attribute_name(:edition) %>:</strong></dt>
  <dd><%= @order.edition.presence || '-'%></dd>
  <dt><strong><%= model_class.human_attribute_name(:selector) %>:</strong></dt>
  <dd><%= @order.selector.presence || '-'%></dd>
  <dt><strong><%= model_class.human_attribute_name(:requestor) %>:</strong></dt>
  <dd><%= @order.requestor.presence || '-'%></dd>
  <dt><strong><%= model_class.human_attribute_name(:location_code) %>:</strong></dt>
  <dd><%= @order.location_code.presence || '-'%></dd>
  <dt><strong><%= model_class.human_attribute_name(:fund) %>:</strong></dt>
  <dd><%= @order.fund.presence || '-'%></dd>
  <dt><strong><%= model_class.human_attribute_name(:cost) %>:</strong></dt>
  <dd><%= number_to_currency(@order.cost.to_s.insert(-3,'.'))  || '-'%></dd>
  <dt><strong><%= model_class.human_attribute_name(:added_edition) %>:</strong></dt>
  <dd><%= @order.added_edition.presence || '-'%></dd>
  <dt><strong><%= model_class.human_attribute_name(:added_copy) %>:</strong></dt>
  <dd><%= @order.added_copy.presence || '-'%></dd>
  <dt><strong><%= model_class.human_attribute_name(:added_copy_call_number) %>:</strong></dt>
  <dd><%= @order.added_copy_call_number.presence || '-'%></dd>
  <dt><strong><%= model_class.human_attribute_name(:rush_order) %>:</strong></dt>
  <dd><%= @order.rush_order  || '-'%></dd>
  <dt><strong><%= model_class.human_attribute_name(:rush_process) %>:</strong></dt>
  <dd><%= @order.rush_process || '-'%></dd>
  <dt><strong><%= model_class.human_attribute_name(:notify) %>:</strong></dt>
  <dd><%= @order.notify || '-'%></dd>
  <dt><strong><%= model_class.human_attribute_name(:reserve) %>:</strong></dt>
  <dd><%= @order.reserve || '-'%></dd>
  <dt><strong><%= model_class.human_attribute_name(:notification_contact) %>:</strong></dt>
  <dd><%= @order.notification_contact.presence || '-'%></dd>
  <dt><strong><%= model_class.human_attribute_name(:relevant_url) %>:</strong></dt>
  <dd><%= @order.relevant_url.presence || '-'%></dd>
  <dt><strong><%= model_class.human_attribute_name(:other_notes) %>:</strong></dt>
  <dd><%= @order.other_notes.presence || '-'%></dd>
</dl>

<% if current_user.instance_of? Admin %>
<dl class="dl-horizontal">
    <div class="well well-sm">
    <h4>Admin</h4>
 <dt><strong><%= model_class.human_attribute_name(:vendor_code) %>:</strong></dt>
  <dd><%= @order.vendor_code.presence || '-'%></dd>
  <dt><strong><%= model_class.human_attribute_name(:vendor_note) %>:</strong></dt>
  <dd><%= @order.vendor_note.presence || '-'%></dd>
</div> 
</dl>
  <% end %>



<div class="form-actions">
  <%= link_to t('.back', :default => t("helpers.links.back")),
              orders_path, :class => 'btn'  %>
          
          
            <%= link_to t('.edit', :default => t("helpers.links.edit")), edit_order_path(@order), :class => 'btn' || '-' %>

            <% if current_user.instance_of? Admin %>
<div class="btn-group dropup">
      <% if @order.current_state.events.keys.count > 0 %>
  <a class="btn dropdown-toggle" data-toggle="dropdown" href="#">
    <%= "Current: #{model_class.human_attribute_name(@order.current_state)}" %> 
        <span class="caret"></span>
      </a>
          <ul class="dropdown-menu">
           <% @order.current_state.events.keys.each do |i| %> 
             <li> <%= link_to model_class.human_attribute_name(i), "/orders/#{@order.id}/#{i}", method: :put, data: {confirm: 'Are you sure?'}
           %> </li>
           <% end %>
         </ul>
       <% else %>
         <%= link_to "Status: #{model_class.human_attribute_name(@order.current_state)}", '', class: 'btn' %>
    <% end %>
</div>




  <%= link_to t('.destroy', :default => t("helpers.links.destroy")),
              order_path(@order),
              :method => 'delete',
              :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) },
              :class => 'btn btn-danger' %>
          <% end %>
</div>
</div>

